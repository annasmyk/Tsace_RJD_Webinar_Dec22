---
title: |
 | Using JDemetra+ in R: from version 2 to version 3 
 | Presentation 3: Wrangling workspaces in R
subtitle: "TSACE Webinar, Wednesday December 14th 2022"
author: "Anna Smyk and Tanguy Barthelemy"
division: |
    | With the collaboration of Alain Quartier-la-tente
    | 
logo: "img/SACElogo"
automaticcontents: true
automaticcontentstext: "Contents"
output:
    beamer_presentation:
        template: template_Beamer.tex
        keep_tex: yes
        theme: TorinoTh
        slide_level: 3
        includes:
          in_header: preamble_beamer.tex
themeoptions: "coding=utf8,language=english"
classoption: 'usepdftitle=false,french' #handout
fontsize: 10pt
bibliography: [biblio.bib]
biblio-style: unsrtnat
natbiboptions: [numbers]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      cache = F, 
                      fig.align = 'center',
                      fig.path = "img/markdown-")
library(knitr)
library(kableExtra)
library(microbenchmark)
library(ggplot2)
library(rjd3toolkit)
library(rjd3modelling)
library(rjd3sa)
library(rjd3arima)
library(rjd3x13)
library(rjd3tramoseats)
library(rjdemetra3)
library(ggdemetra3)

# library(rjd3sts)
# library(rjd3highfreq)

# library(rjd3bench)
fig.ext <- "pdf"
is_html <- knitr::is_html_output()
is_latex <- knitr::is_latex_output()
fig.ext = "pdf"
if(is_html){
    fa_arrow_circle_right <- '<i class="fas fa-arrow-circle-right"></i>'
    fa_r_project <- '<i class="fab fa-r-project"></i>'
}else {
    if(is_latex){
        fa_arrow_circle_right <- "\\faIcon{arrow-circle-right}"
        fa_r_project <- "\\faIcon{r-project}"
        fa_java <- "\\faIcon{java}"
    }else {
        fa_arrow_circle_right <- "->"
        fa_r_project <- 'R'
    }
}
options(width = 60)
def.par <- par(no.readonly = TRUE)
```

# Introduction

### Context 

- a workspace is a JD+ specific data structure (xml files) which allows to use the GUI and cruncher 

- in R we don't need this stucture to run an SA process (cf P2)

- we could think sa processing with JD+ algorithms can happen in two disntict worlds 
  - GUI and cruncher using workspaces OR
  - R functions (without workpaces, TS object or numeric vectors for HF)

Still there are benefits in using workspaces and R packages in conjunction

We will highlight them in the remaining of this presentation 

# Using workspaces and R packages in conjuction

### Using workspaces and R packages in conjuction 

Two (?) classes of benefits

- instant reading: immersing results in the R world (functions, plots..)

- automating potential manual operations 

### Workspace reading in R

Context: 

cf doc R tools for v2
what is available in v3

# Automating operations on workspaces 

### Automating operations on workspaces 

operations 
- creation 
- loading 
- modifications 
  - adding sa processings
  - adding series (sa item vs specs)


### Automating operations on series 

- series object
- spec 
- meta data

### Merging workspaces 

context: annual rev



### Preserving desirable properties ?

two features to preserve
- GUI readable 
- Crunchable 

When are the preserved and when not ?


# Conclusion

### Summary of functionnalities 

- available 

- missing 



### Package's perimeter and  ressources

- V2 vs V3: not clear cut yet
not many features are available in sheer v3
rjdworkspace (predating v3) functions will be (partly) integrated into rjdemetra3 package





